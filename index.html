<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Juego de los Tesoros - ESPOL</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="isometric-grid"></div>
    <div id="app">
      <nav class="navbar">
        <div class="logo" id="app-logo" style="cursor: pointer">
          <span style="font-weight: 700; letter-spacing: -0.5px">ESPOL</span>
          <span style="color: var(--text-dim)">/ CCPG1049</span>
        </div>
        <div class="nav-links">
          <!-- Links removed -->
        </div>
        <button id="btn-team" class="btn-white">EQUIPO</button>
      </nav>

      <main>
        <!-- Welcome / Config Screen -->
        <section id="welcome-screen" class="hero">
          <div class="hero-content">
            <div class="badge">
              PROYECTO <span class="y-combinator">1ER</span> PARCIAL
            </div>
            <h1>Juego de los<br />Tesoros</h1>
            <p class="subtitle">
              Organización de Computadores. Simulación de bajo nivel.
            </p>

            <div class="config-box">
              <div class="input-group">
                <label>TAMAÑO DEL TABLERO (20-120)</label>
                <input
                  type="number"
                  id="board-size-input"
                  min="20"
                  max="120"
                  value="30"
                  class="dark-input"
                />
              </div>
              <div class="cta-group">
                <button id="btn-start" class="btn-white btn-large">
                  INICIAR JUEGO
                </button>
                <button id="btn-rules" class="btn-ghost">REGLAS</button>
              </div>
              <p id="config-error" class="error-msg"></p>
            </div>
          </div>
          <div class="hero-graphic" id="hero-graphic">
            <!-- Grid moved to background -->
          </div>
        </section>

        <!-- Game Screen -->
        <section id="game-screen" class="preview-section hidden">
          <div id="board-visual" class="board-visual"></div>
          <div class="tabs">
            <button class="tab active">GAME CONSOLE</button>
            <button class="tab" id="btn-mips">MIPS CODE</button>
            <div class="spacer"></div>
            <button class="tab" id="btn-reset">RESTART</button>
          </div>

          <div class="preview-grid">
            <!-- Player Column -->
            <div class="preview-col">
              <div class="col-header">
                JUGADOR (USUARIO)
                <div class="indicator player-indicator"></div>
              </div>
              <div class="code-block">
                <div class="stat-item">
                  <span class="label">POSICIÓN</span>
                  <span class="value-text" id="p-pos">0</span>
                </div>
                <div class="stat-item">
                  <span class="label">DINERO</span>
                  <span class="value-text success"
                    >$<span id="p-money">0</span></span
                  >
                </div>
                <div class="stat-item">
                  <span class="label">TESOROS</span>
                  <span class="value-text accent"
                    ><span id="p-treasures">0</span>/3</span
                  >
                </div>

                <div class="control-area">
                  <div
                    class="col-header"
                    style="margin-top: 2rem; margin-bottom: 0.5rem"
                  >
                    ACCIONES
                  </div>
                  <div class="input-row">
                    <input
                      type="number"
                      id="move-input"
                      min="1"
                      max="6"
                      value="1"
                      class="dark-input small"
                    />
                    <button id="btn-move" class="btn-white small">
                      AVANZAR
                    </button>
                  </div>
                  <div class="input-help">Ingrese 1-6 casillas</div>
                </div>
              </div>
            </div>

            <!-- Machine Column -->
            <div class="preview-col">
              <div class="col-header">
                MÁQUINA (CPU)
                <div class="indicator machine-indicator"></div>
              </div>
              <div class="code-block">
                <div class="stat-item">
                  <span class="label">POSICIÓN</span>
                  <span class="value-text" id="m-pos">0</span>
                </div>
                <div class="stat-item">
                  <span class="label">DINERO</span>
                  <span class="value-text success"
                    >$<span id="m-money">0</span></span
                  >
                </div>
                <div class="stat-item">
                  <span class="label">TESOROS</span>
                  <span class="value-text accent"
                    ><span id="m-treasures">0</span>/3</span
                  >
                </div>

                <div class="stat-item" style="margin-top: 2rem">
                  <span class="label">ÚLTIMO DADO</span>
                  <span class="value-text" id="m-roll">-</span>
                </div>
              </div>
            </div>

            <!-- Logs Column -->
            <div class="preview-col wide">
              <div class="user-info">
                <div class="info-group">
                  <label>ESTADO</label>
                  <div class="value" id="game-status">ESPERANDO INICIO...</div>
                </div>
                <div class="info-group">
                  <label>TURNO</label>
                  <div class="value" id="turn-indicator">-</div>
                </div>
              </div>

              <div class="sdk-preview">
                <div class="sdk-header">
                  <span>TERMINAL OUTPUT</span>
                  <span class="badge-blue">LIVE</span>
                </div>
                <div class="code-block terminal-scroll" id="game-logs">
                  <div class="code-line dim">System initialized...</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Team Modal -->
        <div id="team-modal" class="modal hidden">
          <div class="modal-content">
            <div class="modal-header">
              <h3>INTEGRANTES DEL EQUIPO</h3>
              <button id="close-modal" class="close-btn">×</button>
            </div>
            <div class="team-list">
              <div class="team-member">
                <span class="role">ESTUDIANTE</span>
                <span class="name">RINCON HERNANDEZ DANIEL EFRAIN</span>
              </div>
              <div class="team-member">
                <span class="role">ESTUDIANTE</span>
                <span class="name">AYALA HURTADO DANNA ANTONELLA</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Rules Modal -->
        <div id="rules-modal" class="modal hidden">
          <div class="modal-content">
            <div class="modal-header">
              <h3>REGLAS DEL JUEGO</h3>
              <button id="close-rules-modal" class="close-btn">×</button>
            </div>
            <div class="rules-grid-modal">
              <div class="rule-item">
                <h4>01. EL TABLERO</h4>
                <p>
                  Unidimensional de 20 a 120 casillas. Contiene tesoros (30%) y
                  dinero ($0-$100).
                </p>
              </div>
              <div class="rule-item">
                <h4>02. TURNOS</h4>
                <p>
                  Jugador elige avanzar 1-6 casillas. La máquina lanza un dado
                  aleatorio (1-6).
                </p>
              </div>
              <div class="rule-item">
                <h4>03. VICTORIA</h4>
                <p>
                  Gana quien encuentre 3 tesoros primero o quien tenga más
                  dinero al llegar al final.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- MIPS Modal -->
        <div id="mips-modal" class="modal hidden">
          <div class="modal-content wide-modal">
            <div class="modal-header">
              <h3>REGISTROS MIPS</h3>
              <button id="close-mips-modal" class="close-btn">×</button>
            </div>
            <div class="mips-content">
              <div
                class="code-block terminal-scroll"
                id="mips-code-display"
                style="max-height: 400px"
              >
                <!-- Code will be injected here -->
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
